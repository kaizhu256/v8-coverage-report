<!DOCTYPE html>
<html lang="en">
<head>
<title>V8 Coverage Report</title>
<style>
/* jslint utility2:true */
/*csslint ignore:start*/
* {
box-sizing: border-box;
    font-family: consolas, menlo, monospace;
}
/*csslint ignore:end*/
body {
    margin: 0;
}
.coverage pre {
    margin: 5px 0;
}
.coverage table {
    border-collapse: collapse;
}
.coverage td,
.coverage th {
    border: 1px solid #777;
    margin: 0;
    padding: 5px;
}
.coverage td span {
    display: inline-block;
    width: 100%;
}
.coverage .content {
    padding: 0 5px;
}
.coverage .content a {
    text-decoration: none;
}
.coverage .count {
    margin: 0 5px;
    padding: 0 5px;
}
.coverage .footer,
.coverage .header {
    padding: 20px;
}
.coverage .footer {
    text-align: center;
}
.coverage .percentbar {
    height: 12px;
    margin: 2px 0;
    min-width: 200px;
    position: relative;
    width: 100%;
}
.coverage .percentbar div {
    height: 100%;
    position: absolute;
}
.coverage .title {
    font-size: large;
    font-weight: bold;
    margin-bottom: 10px;
}

.coverage td,
.coverage th {
    background: #fff;
}
.coverage .count {
    background: #9d9;
    color: #777;
}
.coverage .coverageHigh{
    background: #9d9;
}
.coverage .coverageIgnore{
    background: #ccc;
}
.coverage .coverageLow{
    background: #ebb;
}
.coverage .coverageMedium{
    background: #fd7;
}
.coverage .footer,
.coverage .header {
    background: #ddd;
}
.coverage .lineno {
    background: #ddd;
}
.coverage .percentbar {
    background: #999;
}
.coverage .percentbar div {
    background: #666;
}
.coverage .uncovered {
    background: #dbb;
}

.coverage pre:hover span,
.coverage tr:hover td {
    background: #7d7;
}
.coverage pre:hover span.uncovered,
.coverage tr:hover td.coverageLow {
    background: #d99;
}
</style>
</head>
<body class="coverage">
<!-- header start -->
<div class="header">
<div class="title">V8 Coverage Report</div>
<table>
<thead>
    <tr>
    <th>Files covered</th>
    <th>Lines</th>
    </tr>
</thead>
<tbody>
<tr>
    <td class="coverageHigh">
            <a href="../index.html">. / </a>test/unicode.test.js<br>
        <div class="percentbar">
            <div style="width: 98.26%;"></div>
        </div>
    </td>
    <td style="text-align: right;">
         98.26 %<br>
        113 / 115
    </td>
    </tr>
</tbody>
</table>
</div>
<!-- header end -->
<!-- content start -->
<div class="content">
<pre><span class="lineno"><a href="#line_1" id="line_1">    1.</a></span><span class="count                ">      1</span><span>var sqlite3 = require('..');</span></pre>
<pre><span class="lineno"><a href="#line_2" id="line_2">    2.</a></span><span class="count                ">      1</span><span>var assert = require('assert');</span></pre>
<pre><span class="lineno"><a href="#line_3" id="line_3">    3.</a></span><span class="count                ">      1</span><span></span></pre>
<pre><span class="lineno"><a href="#line_4" id="line_4">    4.</a></span><span class="count                ">      1</span><span>describe('unicode', function() {</span></pre>
<pre><span class="lineno"><a href="#line_5" id="line_5">    5.</a></span><span class="count                ">      1</span><span>    var first_values = [],</span></pre>
<pre><span class="lineno"><a href="#line_6" id="line_6">    6.</a></span><span class="count                ">      1</span><span>        trailing_values = [],</span></pre>
<pre><span class="lineno"><a href="#line_7" id="line_7">    7.</a></span><span class="count                ">      1</span><span>        chars = [],</span></pre>
<pre><span class="lineno"><a href="#line_8" id="line_8">    8.</a></span><span class="count                ">      1</span><span>        subranges = new Array(2),</span></pre>
<pre><span class="lineno"><a href="#line_9" id="line_9">    9.</a></span><span class="count                ">      1</span><span>        len = subranges.length,</span></pre>
<pre><span class="lineno"><a href="#line_10" id="line_10">   10.</a></span><span class="count                ">      1</span><span>        db,</span></pre>
<pre><span class="lineno"><a href="#line_11" id="line_11">   11.</a></span><span class="count                ">      1</span><span>        i;</span></pre>
<pre><span class="lineno"><a href="#line_12" id="line_12">   12.</a></span><span class="count                ">      1</span><span></span></pre>
<pre><span class="lineno"><a href="#line_13" id="line_13">   13.</a></span><span class="count                ">      1</span><span>    before(function(done) { db = new sqlite3.Database(':memory:', done); });</span></pre>
<pre><span class="lineno"><a href="#line_14" id="line_14">   14.</a></span><span class="count                ">      1</span><span></span></pre>
<pre><span class="lineno"><a href="#line_15" id="line_15">   15.</a></span><span class="count                ">     96</span><span>    for (i = 0x20; i &lt; 0x80; i++) {</span></pre>
<pre><span class="lineno"><a href="#line_16" id="line_16">   16.</a></span><span class="count                ">     96</span><span>        first_values.push(i);</span></pre>
<pre><span class="lineno"><a href="#line_17" id="line_17">   17.</a></span><span class="count                ">     96</span><span>    }</span></pre>
<pre><span class="lineno"><a href="#line_18" id="line_18">   18.</a></span><span class="count                ">      1</span><span></span></pre>
<pre><span class="lineno"><a href="#line_19" id="line_19">   19.</a></span><span class="count                ">     46</span><span>    for (i = 0xc2; i &lt; 0xf0; i++) {</span></pre>
<pre><span class="lineno"><a href="#line_20" id="line_20">   20.</a></span><span class="count                ">     46</span><span>        first_values.push(i);</span></pre>
<pre><span class="lineno"><a href="#line_21" id="line_21">   21.</a></span><span class="count                ">     46</span><span>    }</span></pre>
<pre><span class="lineno"><a href="#line_22" id="line_22">   22.</a></span><span class="count                ">      1</span><span></span></pre>
<pre><span class="lineno"><a href="#line_23" id="line_23">   23.</a></span><span class="count                ">     64</span><span>    for (i = 0x80; i &lt; 0xc0; i++) {</span></pre>
<pre><span class="lineno"><a href="#line_24" id="line_24">   24.</a></span><span class="count                ">     64</span><span>        trailing_values.push(i);</span></pre>
<pre><span class="lineno"><a href="#line_25" id="line_25">   25.</a></span><span class="count                ">     64</span><span>    }</span></pre>
<pre><span class="lineno"><a href="#line_26" id="line_26">   26.</a></span><span class="count                ">      1</span><span></span></pre>
<pre><span class="lineno"><a href="#line_27" id="line_27">   27.</a></span><span class="count                ">      2</span><span>    for (i = 0; i &lt; len; i++) {</span></pre>
<pre><span class="lineno"><a href="#line_28" id="line_28">   28.</a></span><span class="count                ">      2</span><span>        subranges[i] = [];</span></pre>
<pre><span class="lineno"><a href="#line_29" id="line_29">   29.</a></span><span class="count                ">      2</span><span>    }</span></pre>
<pre><span class="lineno"><a href="#line_30" id="line_30">   30.</a></span><span class="count                ">      1</span><span></span></pre>
<pre><span class="lineno"><a href="#line_31" id="line_31">   31.</a></span><span class="count                ">     32</span><span>    for (i = 0xa0; i &lt; 0xc0; i++) {</span></pre>
<pre><span class="lineno"><a href="#line_32" id="line_32">   32.</a></span><span class="count                ">     32</span><span>        subranges[0].push(i);</span></pre>
<pre><span class="lineno"><a href="#line_33" id="line_33">   33.</a></span><span class="count                ">     32</span><span>    }</span></pre>
<pre><span class="lineno"><a href="#line_34" id="line_34">   34.</a></span><span class="count                ">      1</span><span></span></pre>
<pre><span class="lineno"><a href="#line_35" id="line_35">   35.</a></span><span class="count                ">     32</span><span>    for (i = 0x80; i &lt; 0xa0; i++) {</span></pre>
<pre><span class="lineno"><a href="#line_36" id="line_36">   36.</a></span><span class="count                ">     32</span><span>        subranges[1].push(i);</span></pre>
<pre><span class="lineno"><a href="#line_37" id="line_37">   37.</a></span><span class="count                ">     32</span><span>    }</span></pre>
<pre><span class="lineno"><a href="#line_38" id="line_38">   38.</a></span><span class="count                ">      1</span><span></span></pre>
<pre><span class="lineno"><a href="#line_39" id="line_39">   39.</a></span><span class="count                "> 218538</span><span>    function random_choice(arr) {</span></pre>
<pre><span class="lineno"><a href="#line_40" id="line_40">   40.</a></span><span class="count                "> 218538</span><span>        return arr[Math.random() * arr.length | 0];</span></pre>
<pre><span class="lineno"><a href="#line_41" id="line_41">   41.</a></span><span class="count                "> 218538</span><span>    }</span></pre>
<pre><span class="lineno"><a href="#line_42" id="line_42">   42.</a></span><span class="count                ">      1</span><span></span></pre>
<pre><span class="lineno"><a href="#line_43" id="line_43">   43.</a></span><span class="count                "> 151819</span><span>    function random_utf8() {</span></pre>
<pre><span class="lineno"><a href="#line_44" id="line_44">   44.</a></span><span class="count                "> 151819</span><span>        var first = random_choice(first_values);</span></pre>
<pre><span class="lineno"><a href="#line_45" id="line_45">   45.</a></span><span class="count                "> 151819</span><span></span></pre>
<pre><span class="lineno"><a href="#line_46" id="line_46">   46.</a></span><span class="count                "> 102261</span><span>        if (first &lt; 0x80) {</span></pre>
<pre><span class="lineno"><a href="#line_47" id="line_47">   47.</a></span><span class="count                "> 102261</span><span>            return String.fromCharCode(first);</span></pre>
<pre><span class="lineno"><a href="#line_48" id="line_48">   48.</a></span><span class="count                "> 102261</span><span>        } else if (first &lt; 0xe0) {</span></pre>
<pre><span class="lineno"><a href="#line_49" id="line_49">   49.</a></span><span class="count                ">  49558</span><span>            return String.fromCharCode((first &amp; 0x1f) &lt;&lt; 0x6 | random_choice(trailing_values) &amp; 0x3f);</span></pre>
<pre><span class="lineno"><a href="#line_50" id="line_50">   50.</a></span><span class="count                ">  49558</span><span>        } else if (first == 0xe0) {</span></pre>
<pre><span class="lineno"><a href="#line_51" id="line_51">   51.</a></span><span class="count                ">  49558</span><span>             return String.fromCharCode(((first &amp; 0xf) &lt;&lt; 0xc) | ((random_choice(subranges[0]) &amp; 0x3f) &lt;&lt; 6) | random_choice(trailing_values) &amp; 0x3f);</span></pre>
<pre><span class="lineno"><a href="#line_52" id="line_52">   52.</a></span><span class="count                ">  49558</span><span>        } else if (first == 0xed) {</span></pre>
<pre><span class="lineno"><a href="#line_53" id="line_53">   53.</a></span><span class="count                ">  49558</span><span>            return String.fromCharCode(((first &amp; 0xf) &lt;&lt; 0xc) | ((random_choice(subranges[1]) &amp; 0x3f) &lt;&lt; 6) | random_choice(trailing_values) &amp; 0x3f);</span></pre>
<pre><span class="lineno"><a href="#line_54" id="line_54">   54.</a></span><span class="count                ">  49558</span><span>        } else if (first &lt; 0xf0) {</span></pre>
<pre><span class="lineno"><a href="#line_55" id="line_55">   55.</a></span><span class="count                ">  49558</span><span>            return String.fromCharCode(((first &amp; 0xf) &lt;&lt; 0xc) | ((random_choice(trailing_values) &amp; 0x3f) &lt;&lt; 6) | random_choice(trailing_values) &amp; 0x3f);</span></pre>
<pre><span class="lineno"><a href="#line_56" id="line_56">   56.</a></span><span class="count                ">  49558</span><span>        }</span></pre>
<pre><span class="lineno"><a href="#line_57" id="line_57">   57.</a></span><span class="count                "> 151819</span><span>    }</span></pre>
<pre><span class="lineno"><a href="#line_58" id="line_58">   58.</a></span><span class="count                ">      1</span><span></span></pre>
<pre><span class="lineno"><a href="#line_59" id="line_59">   59.</a></span><span class="count                ">    999</span><span>    function randomString() {</span></pre>
<pre><span class="lineno"><a href="#line_60" id="line_60">   60.</a></span><span class="count                ">    999</span><span>        var str = '',</span></pre>
<pre><span class="lineno"><a href="#line_61" id="line_61">   61.</a></span><span class="count                ">    999</span><span>        i;</span></pre>
<pre><span class="lineno"><a href="#line_62" id="line_62">   62.</a></span><span class="count                ">    999</span><span></span></pre>
<pre><span class="lineno"><a href="#line_63" id="line_63">   63.</a></span><span class="count                "> 151819</span><span>        for (i = Math.random() * 300; i &gt; 0; i--) {</span></pre>
<pre><span class="lineno"><a href="#line_64" id="line_64">   64.</a></span><span class="count                "> 151819</span><span>            str += random_utf8();</span></pre>
<pre><span class="lineno"><a href="#line_65" id="line_65">   65.</a></span><span class="count                "> 151819</span><span>        }</span></pre>
<pre><span class="lineno"><a href="#line_66" id="line_66">   66.</a></span><span class="count                ">    999</span><span></span></pre>
<pre><span class="lineno"><a href="#line_67" id="line_67">   67.</a></span><span class="count                ">    999</span><span>        return str;</span></pre>
<pre><span class="lineno"><a href="#line_68" id="line_68">   68.</a></span><span class="count                ">    999</span><span>    }</span></pre>
<pre><span class="lineno"><a href="#line_69" id="line_69">   69.</a></span><span class="count                ">      1</span><span></span></pre>
<pre><span class="lineno"><a href="#line_70" id="line_70">   70.</a></span><span class="count                ">      1</span><span></span></pre>
<pre><span class="lineno"><a href="#line_71" id="line_71">   71.</a></span><span class="count                ">      1</span><span>        // Generate random data.</span></pre>
<pre><span class="lineno"><a href="#line_72" id="line_72">   72.</a></span><span class="count                ">      1</span><span>    var data = [];</span></pre>
<pre><span class="lineno"><a href="#line_73" id="line_73">   73.</a></span><span class="count                ">      1</span><span>    var length = Math.floor(Math.random() * 1000) + 200;</span></pre>
<pre><span class="lineno"><a href="#line_74" id="line_74">   74.</a></span><span class="count                ">    999</span><span>    for (var i = 0; i &lt; length; i++) {</span></pre>
<pre><span class="lineno"><a href="#line_75" id="line_75">   75.</a></span><span class="count                ">    999</span><span>        data.push(randomString());</span></pre>
<pre><span class="lineno"><a href="#line_76" id="line_76">   76.</a></span><span class="count                ">    999</span><span>    }</span></pre>
<pre><span class="lineno"><a href="#line_77" id="line_77">   77.</a></span><span class="count                ">      1</span><span></span></pre>
<pre><span class="lineno"><a href="#line_78" id="line_78">   78.</a></span><span class="count                ">      1</span><span>    var inserted = 0;</span></pre>
<pre><span class="lineno"><a href="#line_79" id="line_79">   79.</a></span><span class="count                ">      1</span><span>    var retrieved = 0;</span></pre>
<pre><span class="lineno"><a href="#line_80" id="line_80">   80.</a></span><span class="count                ">      1</span><span></span></pre>
<pre><span class="lineno"><a href="#line_81" id="line_81">   81.</a></span><span class="count                ">      1</span><span>    it('should create the table', function(done) {</span></pre>
<pre><span class="lineno"><a href="#line_82" id="line_82">   82.</a></span><span class="count                ">      1</span><span>        db.run("CREATE TABLE foo (id int, txt text)", done);</span></pre>
<pre><span class="lineno"><a href="#line_83" id="line_83">   83.</a></span><span class="count                ">      1</span><span>    });</span></pre>
<pre><span class="lineno"><a href="#line_84" id="line_84">   84.</a></span><span class="count                ">      1</span><span></span></pre>
<pre><span class="lineno"><a href="#line_85" id="line_85">   85.</a></span><span class="count                ">      1</span><span>    it('should insert all values', function(done) {</span></pre>
<pre><span class="lineno"><a href="#line_86" id="line_86">   86.</a></span><span class="count                ">      1</span><span>        var stmt = db.prepare("INSERT INTO foo VALUES(?, ?)");</span></pre>
<pre><span class="lineno"><a href="#line_87" id="line_87">   87.</a></span><span class="count                ">    999</span><span>        for (var i = 0; i &lt; data.length; i++) {</span></pre>
<pre><span class="lineno"><a href="#line_88" id="line_88">   88.</a></span><span class="count                ">    999</span><span>            stmt.run(i, data[i], function(err) {</span></pre>
<pre><span class="lineno"><a href="#line_89" id="line_89">   89.</a></span><span class="count                uncovered">      0</span><span>                if (err) </span><span class="uncovered">throw err;</span></pre>
<pre><span class="lineno"><a href="#line_90" id="line_90">   90.</a></span><span class="count                ">    999</span><span>                inserted++;</span></pre>
<pre><span class="lineno"><a href="#line_91" id="line_91">   91.</a></span><span class="count                ">    999</span><span>            });</span></pre>
<pre><span class="lineno"><a href="#line_92" id="line_92">   92.</a></span><span class="count                ">    999</span><span>        }</span></pre>
<pre><span class="lineno"><a href="#line_93" id="line_93">   93.</a></span><span class="count                ">      1</span><span>        stmt.finalize(done);</span></pre>
<pre><span class="lineno"><a href="#line_94" id="line_94">   94.</a></span><span class="count                ">      1</span><span>    });</span></pre>
<pre><span class="lineno"><a href="#line_95" id="line_95">   95.</a></span><span class="count                ">      1</span><span></span></pre>
<pre><span class="lineno"><a href="#line_96" id="line_96">   96.</a></span><span class="count                ">      1</span><span>    it('should retrieve all values', function(done) {</span></pre>
<pre><span class="lineno"><a href="#line_97" id="line_97">   97.</a></span><span class="count                ">      1</span><span>        db.all("SELECT txt FROM foo ORDER BY id", function(err, rows) {</span></pre>
<pre><span class="lineno"><a href="#line_98" id="line_98">   98.</a></span><span class="count                uncovered">      0</span><span>            if (err) </span><span class="uncovered">throw err;</span></pre>
<pre><span class="lineno"><a href="#line_99" id="line_99">   99.</a></span><span class="count                ">      1</span><span></span></pre>
<pre><span class="lineno"><a href="#line_100" id="line_100">  100.</a></span><span class="count                ">    999</span><span>            for (var i = 0; i &lt; rows.length; i++) {</span></pre>
<pre><span class="lineno"><a href="#line_101" id="line_101">  101.</a></span><span class="count                ">    999</span><span>                assert.equal(rows[i].txt, data[i]);</span></pre>
<pre><span class="lineno"><a href="#line_102" id="line_102">  102.</a></span><span class="count                ">    999</span><span>                retrieved++;</span></pre>
<pre><span class="lineno"><a href="#line_103" id="line_103">  103.</a></span><span class="count                ">    999</span><span>            }</span></pre>
<pre><span class="lineno"><a href="#line_104" id="line_104">  104.</a></span><span class="count                ">      1</span><span>            done();</span></pre>
<pre><span class="lineno"><a href="#line_105" id="line_105">  105.</a></span><span class="count                ">      1</span><span>        });</span></pre>
<pre><span class="lineno"><a href="#line_106" id="line_106">  106.</a></span><span class="count                ">      1</span><span>    });</span></pre>
<pre><span class="lineno"><a href="#line_107" id="line_107">  107.</a></span><span class="count                ">      1</span><span></span></pre>
<pre><span class="lineno"><a href="#line_108" id="line_108">  108.</a></span><span class="count                ">      1</span><span>    it('should have inserted and retrieved the correct amount', function() {</span></pre>
<pre><span class="lineno"><a href="#line_109" id="line_109">  109.</a></span><span class="count                ">      1</span><span>        assert.equal(inserted, length);</span></pre>
<pre><span class="lineno"><a href="#line_110" id="line_110">  110.</a></span><span class="count                ">      1</span><span>        assert.equal(retrieved, length);</span></pre>
<pre><span class="lineno"><a href="#line_111" id="line_111">  111.</a></span><span class="count                ">      1</span><span>    });</span></pre>
<pre><span class="lineno"><a href="#line_112" id="line_112">  112.</a></span><span class="count                ">      1</span><span></span></pre>
<pre><span class="lineno"><a href="#line_113" id="line_113">  113.</a></span><span class="count                ">      1</span><span>    after(function(done) { db.close(done); });</span></pre>
<pre><span class="lineno"><a href="#line_114" id="line_114">  114.</a></span><span class="count                ">      1</span><span>});</span></pre>
<pre><span class="lineno"><a href="#line_115" id="line_115">  115.</a></span><span class="count                ">      1</span><span></span></pre>
</div>
<!-- content end -->
<div class="footer">
    [
    This document was created with
    <a href="https://github.com/jslint-org/jslint">JSLint</a>
    ]
</div>
</body>
</html>
